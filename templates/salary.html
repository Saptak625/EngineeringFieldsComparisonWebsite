{% extends "template.html" %}
{% block title %}Salary{% endblock title %}
{% block navLink %}salary{% endblock navLink %}
{% block paginationLink %}3{% endblock paginationLink %}
{% block body %}
{{ super() }}
    <div class="container row text-center text-white bg-dark py-3 rounded">
      <h2><u>Average Annual Pay</u></h2>
      <div class="fs-2 col">
        <div class="text-success fw-bold" id="aerospaceSalary">0</div>
        <div>Aerospace Engineer</div>
      </div>
      <div class="fs-2 col">
        <div class="text-success fw-bold" id="civilSalary">0</div>
        <div>Civil Engineer</div>
      </div>
    </div>

    <h3 class="mt-3">Aerospace Engineering Salary Detail</h3>
    <hr>
    <p>&emsp;&emsp;Aerospace engineering salaries depend upon many factors including experience, industry segment, job location, and educational credentials. Senior-level aerospace engineers obviously command higher salaries than their junior-level counterparts. Additionally, aerospace engineers that work on defense systems that require security clearances often have higher salaries than those simply working on commercial aircraft upgrades. <br><br>
&emsp;&emsp;These engineers working in the defense industry also experience a greater amount of job security while their colleagues who work on commercial aircraft worry about manufacturing jobs being sent overseas.</p>

    <h3 class="mt-5">Civil Engineering Salary Detail</h3>
    <hr>
    <p>&emsp;&emsp;The bottom ten percent make about $50,650 yearly and the top ten percent earns more than 119,000 dollars. All of which is above the national median of 36.3 thousand.
The employment outlook for Civil engineers is also good. As the population grows and the need to expand structures increases, more civil engineers are needed. Aging infrastructure is another driver in the need for more civil engineers.  The Board of Labor Statistics predicts the demand for CEs will rise as much as 19 percent over the next ten years. 
</p>
{% endblock body %}
{% block script %}
function numberWithCommas(x) {
    return x.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
}

function animate(obj, initVal, lastVal, duration, otherTextBefore) {

    let startTime = null;

    //get the current timestamp and assign it to the currentTime variable
    let currentTime = Date.now();

    //pass the current timestamp to the step function
    const step = (currentTime ) => {

        //if the start time is null, assign the current time to startTime
        if (!startTime) {
              startTime = currentTime;
        }

        //calculate the value to be used in calculating the number to be displayed
        const progress = Math.min((currentTime  - startTime) / duration, 1);

        //calculate what to be displayed using the value gotten above
        obj.innerHTML = otherTextBefore + numberWithCommas(Math.floor(progress * (lastVal - initVal) + initVal));

        //checking to make sure the counter does not exceed the last value (lastVal)
        if (progress < 1) {
              window.requestAnimationFrame(step);
        }
        else{
              window.cancelAnimationFrame(window.requestAnimationFrame(step));
        }
    };

    //start animating
    window.requestAnimationFrame(step);
}
          
let text1 = document.getElementById('aerospaceSalary');
let text2 = document.getElementById('civilSalary');

const load = () => {
    animate(text1, 0, 97480, 1500, '$');
    animate(text2, 0, 77560, 1500, '$');
}

load();
{% endblock script %}